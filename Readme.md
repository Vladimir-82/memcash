# MemcLoad
Данный сервис является реализазицей многопоточной загрузки protobuf сообщений в memcache

## Установка и запуск
Для установки данного сервиса необходимо установить сервер `memcache`.
Далее установить необходимые зависимости:
`pip install -r requirements.txt`


Сервер поддерживает следущие параметры запуска:<br>
`"-t", "--test"`, Проверка работы protobuf, по умолчанию является **False**<br>
`"-l", "--log"`, имя файла логирования по умолчанию сообщения выводятся на экран<br>
`"--dry"`, отладочный режим, сообщения не пишутся в хранилище, по умолчанию является **False**<br>
`"--pattern"`, шаблон для поиска логов, по умолчанию равно **"memcache_load/data/appsinstalled/\*.tsv.gz"**<br>
`"--idfa"`, адрес хранилища idfa устройств, по умолчанию равно **"127.0.0.1:33013"**<br>
`"--gaid"`, адрес хранилища gaid устройств, по умолчанию равно **"127.0.0.1:33014"**<br>
`"--adid"`, адрес хранилища adid устройств, по умолчанию равно **"127.0.0.1:33015"**<br>
`"--dvid"`, адрес хранилища dvid устройств, по умолчанию равно **"127.0.0.1:33016"**<br>
`"--processes"`, количество процессов, по умолчанию равно **4**<br>


### Примеры запуска сервиса
Для запуска сервиса достаточно запустить его из папки проекта с параметрами по умолчанию
```bash
python memcache_load/memc_load.py
```

## Запуск тестов
Для запуска тестов необходимо из папки проекта выполнить команду
```bash
pytest -vs tests/test_memcache_load.py
```

